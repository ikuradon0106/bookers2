<h2>Books</h2>
<table class='table table-hover table-inverse'>
  <thead>
    <tr>
      <th>ユーザー</th>
      <th>Title</th>
      <th>Opinion</th>
      <th>詳細</th>
      <th>編集</th>
      <th>削除</th>
    </tr>
  </thead>
  <tbody>
    <% @books.each do |book| %>
      <tr>
        <!-- ユーザー画像のリンク -->
        <td>
          <%= link_to user_path(book.user) do %>
            <% if book.user.image.attached? %>
              <%= image_tag book.user.image.variant(resize_to_limit: [50, 50]), class: "rounded-circle" %>
            <% else %>
              <%= image_tag 'default-user.png', size: "50x50" %>
            <% end %>
          <% end %>
        </td>

        <!-- 本のタイトル（詳細ページへのリンク） -->
        <td><%= link_to book.title, book_path(book) %></td>

        <!-- 本の意見 -->
        <td><%= book.opinion %></td>

        <!-- 編集・削除ボタン -->
        <% if book.user == current_user %>
          <td><%= link_to 'Edit', edit_book_path(book), class: 'btn btn-warning' %></td>
          <td>
            <%= link_to 'Delete', book_path(book), method: :delete, data: { confirm: 'Are you sure?' }, class: 'btn btn-danger' %>
          </td>
        <% else %>
          <td colspan="2"></td> <!-- 他のユーザーの投稿は編集・削除できない -->
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

